---
- name: Bootstrap all hosts
  hosts: all
  gather_facts: false
  tasks:
    - name: Ensure Python is installed (needed for Ansible modules)
      raw: |
        apt-get update -y && apt-get install -y python3
      register: python_install
      changed_when: "'Setting up python3' in python_install.stdout"

    - name: Test connection
      raw: echo "Connected to $(hostname)"
      register: test_output

    - name: Show connection result
      debug:
        msg: "{{ test_output.stdout_lines }}"
